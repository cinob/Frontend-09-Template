<style>
  div {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background-color: gray;
    margin-bottom: 10px;
  }
</style>

<div id="redCircle"></div>
<div id="yellowCircle"></div>
<div id="greenCircle"></div>
<button id="nextBtn">next</button>

<script>
function setColor(ele, color) {
  const lights = document.getElementsByTagName('div')
  for (let i = 0; i < lights.length; i++) {
    lights[i].style['background-color'] = 'gray'
  }
  ele.style['background-color'] = color
}

function sleep(time) {
  return new Promise(resolve => {
    setTimeout(resolve, time * 1000)
  })
}

function happen(ele, eventName) {
  return new Promise(resolve => {
    ele.addEventListener(eventName, resolve, {once: true})
  })
}

async function go() {
  while (true) {
    setColor(greenCircle, 'green')
    await happen(nextBtn, 'click')
    setColor(yellowCircle, 'yellow')
    await happen(nextBtn, 'click')
    setColor(redCircle, 'red')
    await happen(nextBtn, 'click')
  }
}
</script>